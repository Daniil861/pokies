(()=>{"use strict";let t=!1;setTimeout((()=>{if(t){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0),function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(o)return o(r,!0);throw(c=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",c}c=i[r]={exports:{}},e[r][0].call(c.exports,(function(t){return s(e[r][1][t]||t)}),c,c.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){window.SlotMachine=t("./slot-machine")},{"./slot-machine":3}],2:[function(t,e,i){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;e.exports=function(t){setTimeout((function(){return n(t)}),1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{}],3:[function(t,e,i){var n=function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t};function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=t("./timer"),r=t("./raf"),a={active:0,delay:200,auto:!1,spins:5,randomize:null,onComplete:null,inViewport:!0,direction:"up",transition:"ease-in-out"},c="slotMachineNoTransition",l="slotMachineBlurFast",u="slotMachineBlurMedium",h="slotMachineBlurSlow",d="slotMachineBlurTurtle",f="slotMachineGradient",m=f;n(y,[{key:"changeSettings",value:function(t){var e=this;Object.keys(t).forEach((function(i){e[i]=t[i]}))}},{key:"_wrapTiles",value:function(){var t=this;this.container=document.createElement("div"),this.container.classList.add("slotMachineContainer"),this.container.style.transition="1s ease-in-out",this.element.appendChild(this.container),this._fakeFirstTile=this.tiles[this.tiles.length-1].cloneNode(!0),this.container.appendChild(this._fakeFirstTile),this.tiles.forEach((function(e){t.container.appendChild(e)})),this._fakeLastTile=this.tiles[0].cloneNode(!0),this.container.appendChild(this._fakeLastTile)}},{key:"_setBounds",value:function(){var t=this.getTileOffset(this.active),e=this.getTileOffset(this.tiles.length),i=this.getTileOffset(this.tiles.length);this._bounds={up:{key:"up",initial:t,first:0,last:i,to:this._maxTop,firstToLast:i,lastToFirst:0},down:{key:"down",initial:t,first:e,last:0,to:this._minTop,firstToLast:i,lastToFirst:0}}}},{key:"_changeTransition",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.delay,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.transition;this.container.style.transition=t/1e3+"s "+e}},{key:"_changeTransform",value:function(t){this.container.style.transform="matrix(1, 0, 0, 1, 0, "+t+")"}},{key:"_isGoingBackward",value:function(){return this.nextActive>this.active&&0===this.active&&this.nextActive===this.tiles.length-1}},{key:"_isGoingForward",value:function(){return this.nextActive<=this.active&&this.active===this.tiles.length-1&&0===this.nextActive}},{key:"getTileOffset",value:function(t){for(var e=0,i=0;i<t;i++)e+=this.tiles[i].offsetHeight;return this._minTop-e}},{key:"_resetPosition",value:function(t){this.container.classList.toggle(c),this._changeTransform(isNaN(t)?this.bounds.initial:t),this.container.offsetHeight,this.container.classList.toggle(c)}},{key:"prev",value:function(){return this.nextActive=this.prevIndex,this.running=!0,this.stop(),this.nextActive}},{key:"next",value:function(){return this.nextActive=this.nextIndex,this.running=!0,this.stop(),this.nextActive}},{key:"_getDelayFromSpins",value:function(t){var e=this.delay;switch(this.transition="linear",t){case 1:e/=.5,this.transition="ease-out",this._animationFX=d;break;case 2:e/=.75,this._animationFX=h;break;case 3:e/=1,this._animationFX=u;break;case 4:e/=1.25,this._animationFX=u;break;default:e/=1.5,this._animationFX=l}return e}},{key:"shuffle",value:function(t,e){var i,n=this;return"function"==typeof t&&(e=t),this.running=!0,this.visible||!0!==this.inViewport?(i=this._getDelayFromSpins(t),this._changeTransition(i),this._changeTransform(this.bounds.to),r((function(){var i;!n.stopping&&n.running&&(i=t-1,n._resetPosition(n.bounds.first),1<i?n.shuffle(i,e):n.stop(e))}),i)):this.stop(e),this.nextActive}},{key:"stop",value:function(t){var e=this;if(!this.running||this.stopping)return this.nextActive;this.running=!0,this.stopping=!0,Number.isInteger(this.nextActive)||(this.nextActive=this.custom),this._isGoingBackward()?this._resetPosition(this.bounds.firstToLast):this._isGoingForward()&&this._resetPosition(this.bounds.lastToFirst),this.active=this.nextActive;var i=this._getDelayFromSpins(1);return this._changeTransition(i),this._animationFX=m,this._changeTransform(this.getTileOffset(this.active)),r((function(){e.stopping=!1,e.running=!1,e.nextActive=null,"function"==typeof e.onComplete&&e.onComplete(e.active),"function"==typeof t&&t.apply(e,[e.active])}),i),this.active}},{key:"run",value:function(){var t=this;this.running||(this._timer=new o((function(){t.visible||!0!==t.inViewport?t.shuffle(t.spins,(function(){t._timer.reset()})):r((function(){t._timer.reset()}),500)}),this.auto))}},{key:"destroy",value:function(){var t=this;this._fakeFirstTile.remove(),this._fakeLastTile.remove(),this.tiles.forEach((function(e){t.element.appendChild(e)})),this.container.remove()}},{key:"active",get:function(){return this._active},set:function(t){((t=Number(t))<0||t>=this.tiles.length||isNaN(t))&&(t=0),this._active=t}},{key:"direction",get:function(){return this._direction},set:function(t){this.running||(this._direction="down"===t?"down":"up")}},{key:"bounds",get:function(){return this._bounds[this._direction]}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition=t||"ease-in-out"}},{key:"visibleTile",get:function(){var t=this.tiles[0].offsetHeight,e=this.container.style.transform||"";e=parseInt(e.replace(/^matrix\(-?\d+,\s?-?\d+,\s?-?\d+,\s?-?\d+,\s?-?\d+,\s?(-?\d+)\)$/,"$1"),10);return Math.abs(Math.round(e/t))-1}},{key:"random",get:function(){return Math.floor(Math.random()*this.tiles.length)}},{key:"custom",get:function(){var t;return this.randomize?(((t=this.randomize(this.active))<0||t>=this.tiles.length)&&(t=0),t):this.random}},{key:"_prevIndex",get:function(){var t=this.active-1;return t<0?this.tiles.length-1:t}},{key:"_nextIndex",get:function(){var t=this.active+1;return t<this.tiles.length?t:0}},{key:"prevIndex",get:function(){return"up"===this.direction?this._nextIndex:this._prevIndex}},{key:"nextIndex",get:function(){return"up"===this.direction?this._prevIndex:this._nextIndex}},{key:"visible",get:function(){var t=this.element.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth;e=t.top<=e&&0<=t.top+t.height,t=t.left<=i&&0<=t.left+t.width;return e&&t}},{key:"_animationFX",set:function(t){var e=this,i=this.delay/4;r((function(){[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(e.tiles),[e._fakeLastTile,e._fakeFirstTile]).forEach((function(e){e.classList.remove(l,u,h,d),t!==m&&e.classList.add(t)})),t===m?e.container.classList.remove(f):e.container.classList.add(f)}),i)}}]),n=y;function y(t,e){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.element=t,this.tiles=[].slice.call(this.element.children),this.running=!1,this.stopping=!1,this.element.style.overflow="hidden",this._wrapTiles(),this._minTop=-this._fakeFirstTile.offsetHeight,this._maxTop=-this.tiles.reduce((function(t,e){return t+e.offsetHeight}),0),this.changeSettings(Object.assign({},a,e)),this._setBounds(),this._resetPosition(),!1!==this.auto&&this.run()}e.exports=n},{"./raf":2,"./timer":4}],4:[function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.cb=t,this.initialDelay=e,this.delay=e,this.startTime=null,this.timer=null,this.running=!1,this.resume(),this}e.exports=(function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(s,[{key:"_start",value:function(){var t=this;this.timer=setTimeout((function(){t.running=!1,t.cb(t)}),this.delay)}},{key:"cancel",value:function(){this.running=!1,clearTimeout(this.timer)}},{key:"pause",value:function(){this.running&&(this.delay-=(new Date).getTime()-this.startTime,this.cancel())}},{key:"resume",value:function(){this.running||(this.running=!0,this.startTime=(new Date).getTime(),this._start())}},{key:"reset",value:function(){this.cancel(),this.delay=this.initialDelay,this._start()}},{key:"add",value:function(t){this.pause(),this.delay+=t,this.resume()}}]),s)},{}]},{},[1]),window.addEventListener("load",(function(){document.querySelector(".wrapper")&&setTimeout((function(){document.querySelector(".wrapper").classList.add("_loaded")}),200)}));const e=document.querySelector(".choice"),i=document.querySelector(".game"),n=document.querySelector(".darts"),s=document.querySelector(".main"),o=document.querySelector(".darts__dart-single"),r=document.querySelector(".darts__dart-single img"),a=document.querySelector(".shop"),c=document.querySelector(".game__bingo"),l=document.querySelectorAll(".darts__dart");let u=3,h=!0;var d,f,m;document.addEventListener("click",(t=>{const i=t.target;if(i.closest(".header-main__item_home")&&(n.classList.contains("_hide")||(n.classList.add("_hide"),e.classList.remove("_hide"),document.querySelector(".header-main__item_home").style.display="none")),i.closest(".choice__item_darts")&&(e.classList.add("_hide"),n.classList.remove("_hide"),document.querySelector(".header-main__item_home").style.display="block"),i.closest(".darts__body-target")){let t=2500;h&&(!function(t){document.querySelector("body").classList.contains("_lock")?function(t){let e=document.querySelector("body");h&&(setTimeout((()=>{e.classList.remove("_lock")}),t),h=!1,setTimeout((function(){h=!0}),t))}(t):function(t){let e=document.querySelector("body");h&&(e.classList.add("_lock"),h=!1,setTimeout((function(){h=!0}),t))}(t)}(t),setTimeout(x,500),setTimeout(L,1e3))}i.closest(".darts__btn-yes")?(u=3,l.forEach((t=>{t.style.opacity="1"})),document.querySelector(".darts__try").classList.add("_hide"),o.style.top="260px",o.style.left="-200px",o.style.transitionDuration="0.1s",r.style.transform="rotateY(0deg)"):i.closest(".darts__btn-no")&&(n.classList.add("_hide"),e.classList.remove("_hide"),u=3,l.forEach((t=>{t.style.opacity="1"})),o.style.top="260px",o.style.left="-200px",o.style.transitionDuration="0.1s",r.style.transform="rotateY(0deg)",document.querySelector(".header-main__item_home").style.display="none",document.querySelector(".darts__try").classList.add("_hide"))}));var y=2e3;function v(t,e){return Math.random()*(e-t)+t}var _=document.querySelector("#game1"),g=document.querySelector("#game2"),p=document.querySelector("#game3");if(_&&g&&p)var k=new SlotMachine(_,{active:0,delay:100,onComplete:function(t){d=this.active,console.log(d),d==f&&f==m&&d==m&&null!=d&&(c.classList.add("_visible"),setTimeout((function(){a.classList.remove("_hide"),i.classList.add("_hide"),s.classList.remove("_bg-game")}),1500))}}),T=new SlotMachine(g,{active:2,delay:100,onComplete:function(t){f=this.active,console.log(f),d==f&&f==m&&d==m&&null!=d&&(c.classList.add("_visible"),setTimeout((function(){a.classList.remove("_hide"),i.classList.add("_hide"),s.classList.remove("_bg-game")}),1500))}}),w=new SlotMachine(p,{active:1,delay:100,onComplete:function(t){m=this.active,console.log(m),d==f&&f==m&&d==m&&null!=d&&(c.classList.add("_visible"),setTimeout((function(){a.classList.remove("_hide"),i.classList.add("_hide"),s.classList.remove("_bg-game")}),1500))}});function b(){document.querySelector(".darts__try").classList.remove("_hide")}function x(){o.style.transitionTimingFunction="ease",o.style.transitionDuration="1s",o.style.top="260px",o.style.left="-200px",r.style.transform="rotateY(0deg)",r.style.transitionDuration="0.1s"}function L(){u--,o.style.transitionTimingFunction="cubic-bezier(1, -0.82, 0.65, 1.67)",o.style.top=`${v(50,240)}px`,o.style.left=`${v(-65,110)}px`,o.style.transitionDuration="0.6s",r.style.transform="rotateY(45deg)",r.style.transitionDuration="0.6s",l.forEach((t=>{t.style.opacity="0.2"}));for(let t=0;t<u;t++)l[t].style.opacity="1";0==u&&setTimeout(b,2e3)}document.querySelector("#spin")&&document.querySelector("#spin").addEventListener("click",(t=>{_&&g&&p&&(clearInterval(undefined),k.shuffle(9999),T.shuffle(9999),w.shuffle(9999),setTimeout((()=>k.stop()),v(500,y)),setTimeout((()=>T.stop()),v(500,y)),setTimeout((()=>w.stop()),v(500,y))),d=9,f=87,m=56})),window.FLS=!0,function(t){let e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(t){let e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}))})();